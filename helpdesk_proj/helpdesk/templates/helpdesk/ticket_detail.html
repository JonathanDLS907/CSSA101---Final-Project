{% extends "helpdesk/base.html" %}
{% block title %}Ticket #{{ ticket.pk }} — {{ ticket.title }}{% endblock %}

{% block content %}
<div class="card">
  <div class="card-body">
    <div class="d-flex justify-content-between align-items-start">
      <div>
        <h3 class="mb-1">#{{ ticket.pk }} — {{ ticket.title }}</h3>
        <div class="meta-muted">
          Status: {{ ticket.get_status_display }} •
          <span class="badge badge-priority-{{ ticket.priority }} text-white">{{ ticket.get_priority_display }}</span> •
          SLA: {{ ticket.sla_hours }} hrs
        </div>
      </div>

      <div class="text-end">
        {% if ticket.due_at %}
          <div class="mb-1">Due: <strong>{{ ticket.due_at|date:"Y-m-d H:i" }}</strong></div>
          {% if ticket.is_overdue %}
            <div><span class="badge badge-overdue">OVERDUE</span></div>
          {% endif %}
        {% endif %}
      </div>
    </div>

    <hr>

    <div style="white-space:pre-wrap;">{{ ticket.description }}</div>

    <div class="mt-4 d-flex justify-content-between">
      <div class="meta-muted">Reported by {{ ticket.reporter_name }} • {{ ticket.created_at|date:"Y-m-d H:i" }}</div>
      <a href="{% url 'helpdesk:ticket_list' %}" class="btn btn-outline-secondary">Back</a>
    </div>
  </div>
</div>
{% endblock %}
